## 轮询

### 短轮询

#### 基本思路

- 浏览器每隔一段时间向浏览器发送 http 请求，服务器在收到请求后，不论是否有数据更新，都直接进行回应；
- 这种方式实现的即时通信，本质上是浏览器发送请求，服务器接受请求的一个过程，通过让客户端不断的请求，使得客户端能够模拟实时地收到服务器端的数据变化；

### 优缺点

1. 优点是比较简单，易于理解；
2. 缺点是这种方式需要不断的建立 http 连接，严重浪费了服务器和客户端的资源，当用户增加时，服务器端的压力会变大；

### 长轮询

#### 基本思路

- 首先由客户端向服务器发起请求，当服务器收到客户端发来的请求后，服务端不会直接进行响应，而是先将这个请求挂起，然后判断服务器端数据是否有更新；
- 如果有更新，则进行响应，如果一直没有数据，则达到一定的时间限制才返回；
- 客户端 Javascript 响应处理函数会在处理完服务器返回的信息后，再次发出请求，重新建立连接；

#### 优缺点

1. 长轮询和短轮询比起来，明显减少了很多不必要的 http 请求次数，节约了资源；
2. 长轮询的缺点在于，连接挂起也会导致资源的浪费；

## WebSocket

> Websocket 是 html5 定义的一个新协议，与传统的 http 协议不同，该协议允许由服务器主动向客户端推送信息；

- 使用 WebSocket 协议的缺点是在服务器端的配置比较复杂。WebSocket 是一个全双工的协议，也就是通信双方是平等的，可以相互发送消息；
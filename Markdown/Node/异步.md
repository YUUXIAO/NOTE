## 事件循环

1. 在进程启动时，Node 会创建一个类似于 while(true) 的循环，每执行一次循环体的过程称为 Tick；
2. 每个 Tick 的过程就是查看是否有事件待处理；
3. 如果有，就取出事件及其相关的回调函数；
4. 如果存在关联的回调函数，就执它们；
5. 进入下个循环，如果不再有事件处理，就退出进程；

## 观察者

> 观察者用于判断每个 Tick 的过程中，是否有事件需要被处理；

1. 每个事件循环中有一个或者多个观察者，判断是否有事件要处理的过程就是向这些观察者询问是否有要处理的事件；
2. 在 Node 中，事件主要来源于网络请求、文件 I/O 等，这些事件对应的观察者有文件 I/O 观察者、网络 I/O 观察者等；
3. 事件循环是一个生产者/消费者模型，异步 I/O、网络请求等是事件的生产者，不断为 Node 提供不同类型的事件，这些事件被传递给对应的观察者，事件循环从观察者那取出事件并处理；
4. 在 Windows 下，这个循环基于 IOCP 创建，而在 *nix 下则基于多线程创建；

## 请求对象

1. 从 Javascript 发起调用到内核执行完 I/O 操作的过渡过程中，存在一种中间产物，它就是请求对象；
2. 请求对象是异步 I/O 过程中的重要中间产物，所有的状态都保存在这个对象中，包括送入线程池等待执行以及 I/O 操作完毕后的回调处理；

## 执行回调

组装好请求对象、送入 I/O 线程池等待执行，实际上完成了异步  I/O 的第一部分，回调通知是第二部分；
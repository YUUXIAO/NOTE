## 定义

接口测试主要是测试系统组件或系统间的接口的一种测试，主要是用于检测外部系统与系统之间以及内部各个子系统之间的交互点

测试的重点是要检查数据的交换、传递和控制管理过程，以及系统间的相互逻辑依赖

这种测试主要适用于为其他系统提供服务的底层框架系统或中心服务系统，主要是测试这些系统对外部提供的接口，验证其正确性和稳定性

这种接口测试比较容易自动化，通过持续集成的接口监控能及时的发现项目中的问题

## 接口测试的流程

1. 项目启动，测试人员尽早找开发人员拿到接口测试文档
2. 测试人员进行接口用例的编写和测试
3. 接口用例编写调试完后，部署到持续集成的测试环境中
4. 设定脚本运行频率，告警方式等基本参数，进行接口的日常监控
5. 每日进行接口脚本的维护更新，接口异常的处理

## 接口测试的分类

### 模块接口测试

模块接口测试主要测试模块的调用和返回，主要测试点有：

- 检查接口返回的数据与预期是否一致
- 检查接口的容错性，比如传递数据的类型错误时是否可以处理
- 检查参数的边界值，比如参数足够大时是否可以处理
- 接口的性能
- 接口的安全性

### Web接口测试

web接口测试包括：服务器接口测试和外部接口测试

- 服务器接口测试：是测试浏览器与服务器的接口
- 外部接口测试：比较典型的就是第三方支付，调用第三方的接口测试

主要测试要点如下：

- 请求是否正确同，默认请求成功是200，如果请求错误也能返回404、500等
- 检查返回数据的正确性与格式，
- 接口的安全性：一般在网上的接口不能暴露出来被任意调用，需要做一些限制，比如鉴权或认证
- 接口的性能：会直接影响到用户的使用体验

## 测试用例设计与原则

### 测试用例

正面测试用例：

- 覆盖所有的必选参数
- 组合可选参数
- 参数边界值
- 如果参数是枚举值，需要覆盖所有枚举值

负面测试用例

- 空数据
- 包含特殊的字符
- 越界的数据
- 错误的数据

验证点：

- status code ：正常情况下，所有请求都应该返回 200
- 响应信息数据结构：验证对应情况下数据结构发生改变时
- 对于列表，应该根据请求参数判断验证列表的长度是否一致

### 测试原则

测试应该是独立的、可读的、抗变的、可维护的

- 测试用例都是可重复运行的 (这主要是说一些测试数据不能写死，不同的环境数据可能不同。在实际工作中，解决方案有二：
  1. 自已创建所需要的数据，比如你要测试接口需要输入参数 id,你可以先调用创建getID API, 然后从响应值拿到id, 当你测试完你要测的接口后，再把新建的id删除
  2. 读取数据库，从数据库获取数据，这种方法在测试开发与测试环境还OK，但如果测线上环境就比较困难了，因为我们不能随意更新上面的数据，也不能放过多的测试数据在上面。


- 测试能被运行在不同的环境里（平常测试环境至少会分DEV/TEST/STAGING/ONLINE，我们在测试过程中，应该把域名，token/apikey等应放在一个变量里，当切换环境时，我们只需改变变量的值即可
- 测试数据与业务相分离（测试数据包括参数接口数据/ 测试执行所需要的系统数据)
- 尽量统一共用的测试环境变量
- 测试完成后，要删除不必要的测试数据。